<h1>Checkouts/Renewals</h1>

<p>
  <h4>Total Checked Out: <%= patron.checkouts.length %></h4>

  <% count = patron.checkouts.select(&:recalled?).length %>
  <% if count.positive? %>
      <div class="ml-4">Recalled: <%= count %></div>
  <% end %>

  <% count = patron.checkouts.select(&:overdue?).length %>
  <% if count.positive? %>
      <div class="ml-4">Overdue: <%= count %></div>
  <% end %>
</p>

<table class="table">
  <caption>Checkouts Table</caption>
  <thead>
  <tr>
    <th scope="col">Title</th>
    <th scope="col">Author</th>
    <th scope="col">Times Renewed</th>
    <th scope="col">Due Date</th>
    <th scope="col">Status</th>
    <th scope="col">You Owe</th>
  </tr>
  </thead>

  <tbody>
  <% @checkouts.each do |checkout| %>
      <tr>
        <td scope="row"><%= checkout.title %></td>
        <td><%= checkout.author %></td>
        <td><%= checkout.renewal_count %></td>
        <td><%= l(checkout.due_date, format: :short) %> </td>
        <td><%= checkout.status %></td>
        <td>#</td>
      </tr>
  <% end %>
  </tbody>

</table>
